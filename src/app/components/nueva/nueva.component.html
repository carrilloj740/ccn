<app-navbar></app-navbar>
<mat-toolbar class="toolbar2">
  <h1 style="color: black; font-weight: 700;font-family: 'Poppins', sans-serif;">New Order<mat-icon>shopping_cart
    </mat-icon>
  </h1>
</mat-toolbar>

<mat-card>
  <div class="container">
    <form [formGroup]="formHeader" (ngSubmit)="completarOrden()">

      <mat-grid-list cols="3" rowHeight="100px">
        <mat-grid-tile [colspan]="1" [rowspan]="1">
          <mat-form-field class="ancho">
            <mat-label>My PO Number</mat-label>
            <input matInput formControlName="poNbr" autocomplete="off">
          </mat-form-field>
        </mat-grid-tile>

        <mat-grid-tile [colspan]="1" [rowspan]="1">
          <mat-form-field class="ancho">
            <mat-label>Sold to</mat-label>
            <mat-select matNativeControl formControlName="soldTo" (ngModelChange)="selectSoldTo($event)"
              (ngModel)="selectSoldTo">
              <mat-option *ngFor="let accountAddress of accountAddressesList" [value]="accountAddress">
                {{accountAddress.OrganizationName}} {{accountAddress.FormattedAddress}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </mat-grid-tile>

        <!-- <mat-grid-tile [colspan]="1" [rowspan]="1">
          <mat-form-field class="ancho">
            <mat-label>Incortem</mat-label>
            <mat-select [value]="incoterm">
              <mat-option  >
                 {{incoterm}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </mat-grid-tile> -->

        <!-- <mat-grid-tile [colspan]="1" [rowspan]="1">
          <mat-form-field class="ancho">
            <mat-label>Ship to</mat-label>
            <mat-select matNativeControl formControlName="shipTo">
              <mat-option *ngFor="let accountAddress of accountAddressesList" [value]="accountAddress">
                {{accountAddress.FormattedAddress}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </mat-grid-tile> -->

        <mat-grid-tile [colspan]="1" [rowspan]="1">
          <mat-form-field class="ancho">
            <mat-label>Request ETD</mat-label>
            <input matInput [min]="minDate" [max]="maxDate" [matDatepicker]="picker2" formControlName="etd"
              autocomplete="off">
            <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
            <mat-datepicker #picker2></mat-datepicker>
          </mat-form-field>
        </mat-grid-tile>
      </mat-grid-list>
    </form>
    <mat-card class="card-form">
      <div>
        <p class="title-info">Incortem: {{incoterm}}</p>
        <p class="title-info">Ship to:
          {{shipTo}}</p>
      </div>
    </mat-card>
    
    <!-- Seleccion de producto-->
    <h1 style="font-weight: 700;font-family: 'Poppins', sans-serif; margin-top: 40px;">Product <mat-icon>inventory_2
      </mat-icon>
    </h1>

    <form [formGroup]="formProduct" (ngSubmit)="onSubmitProducto()">
      <mat-grid-list cols="3" rowHeight="100px">
        <mat-grid-tile [colspan]="1" [rowspan]="1" *ngIf="shipmentType == 'Maritimo'">
          <mat-form-field class="ancho">
            <mat-label>Container Type</mat-label>
            <mat-select  matNativeControl formControlName="typeContainer">
              <mat-option  value="40HC">M1-40' HC(High Cube) 
              </mat-option>
              <mat-option  value="45HC">M2-45' HC(High Cube)
              </mat-option>
            </mat-select>
          </mat-form-field>
        </mat-grid-tile>
        <mat-grid-tile [colspan]="1" [rowspan]="1" *ngIf="shipmentType != 'Maritimo'">
          <strong>
            Capacidad de cajas: 2850 Wilmers
          </strong>
        </mat-grid-tile>
        <mat-grid-tile [colspan]="1" [rowspan]="1">
          <mat-form-field class="ancho">
            <mat-label> Select Producto</mat-label>
            <!-- <mat-label>Select Product</mat-label> -->
            <mat-select matNativeControl name="select" required formControlName="sku"
              (ngModelChange)="getItemInfo($event)" (ngModel)="productsList">
              <mat-option *ngFor="let product of productsList" [value]="product">
                {{product.ItemDescription}}
                - ${{product.ListPrice}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </mat-grid-tile>

        <mat-grid-tile [colspan]="1" [rowspan]="1">
          <mat-form-field class="ancho">
            <mat-label>Quantity</mat-label>
            <input matInput type="number" formControlName="quantity" min="1" max="999999" autocomplete="off"
              (ngModelChange)="calculo($event)">
          </mat-form-field>
        </mat-grid-tile>

        <button mat-raised-button type="submit" value="Agregar">Add</button> 
      </mat-grid-list>
      <p>
        <span class="title-info">Pallets: </span>
      </p>
      <p>
        <span class="title-info">NÂ° of Containers:</span>
      </p>
      <p>
        <span class="title-info">Shipment Type: </span><span class="title-info">{{shipmentType}}</span>
      </p>
      <!-- <button mat-raised-button type="submit" value="Agregar"
          >Add</button> -->
      <!-- [disabled]="!formProduct.valid || !confirmaCantidad" -->
      <mat-divider></mat-divider>

      <br>
    </form>

    <table class="styled-table">
      <thead>
        <tr class="top">
          <th><strong>SKU</strong></th>
          <th><strong>Description</strong></th>
          <th><strong>Quantity </strong></th>
          <th><strong>Request ETD</strong></th>
          <th><strong>Type Container</strong></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let shoppingCart of shoppingCartList">
          <td>{{shoppingCart.__ORACO__SKU_c}}</td>
          <td>{{shoppingCart.__ORACO__Product_c}}</td>
          <td>{{shoppingCart.__ORACO__Quantity_c}}</td>
          <td>{{shoppingCart.CreationDate}}</td>
          <td>{{shoppingCart.LookupCode}}</td>
        </tr>
      </tbody>
    </table>


    <button class="button2" mat-raised-button (click)="completarOrden()" routerLink="/inicio/seguimiento"
      value="Confirmar">Confirm
    </button>

  </div>
