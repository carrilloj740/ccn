<app-navbar></app-navbar>
<mat-toolbar class="toolbar2">
  <h1 style="color: black; font-weight: 700;font-family: 'Poppins', sans-serif;">New Order<mat-icon>shopping_cart
    </mat-icon>
  </h1>
</mat-toolbar>

<mat-card>
  <div class="container">
    <form [formGroup]="formHeader" (ngSubmit)="completarOrden()">

      <mat-grid-list cols="4" rowHeight="100px">
        <mat-grid-tile [colspan]="1" [rowspan]="1">
          <mat-form-field class="ancho">
            <mat-label>My PO Number</mat-label>
            <input matInput formControlName="poNbr" autocomplete="off">
          </mat-form-field>
        </mat-grid-tile>

        <mat-grid-tile [colspan]="1" [rowspan]="1">
          <mat-form-field class="ancho">
            <mat-label>Sold to</mat-label>
            <mat-select matNativeControl formControlName="soldTo" (ngModelChange)="selectSoldTo($event)"
              (ngModel)="selectSoldTo">
              <mat-option *ngFor="let accountAddress of accountAddressesList" [value]="accountAddress">
                {{accountAddress.FormattedAddress}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </mat-grid-tile>

        <!-- <mat-grid-tile [colspan]="1" [rowspan]="1">
          <mat-form-field class="ancho">
            <mat-label>Incortem</mat-label>
            <mat-select [value]="incoterm">
              <mat-option  >
                 {{incoterm}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </mat-grid-tile> -->

        <mat-grid-tile [colspan]="1" [rowspan]="1">
          <mat-form-field class="ancho">
            <mat-label>Ship to</mat-label>
            <mat-select matNativeControl formControlName="shipTo">
              <mat-option *ngFor="let accountAddress of accountAddressesList" [value]="accountAddress">
                {{accountAddress.FormattedAddress}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </mat-grid-tile>

        <mat-grid-tile [colspan]="1" [rowspan]="1">
          <mat-form-field class="ancho">
            <mat-label>Request ETD</mat-label>
            <input matInput [min]="minDate" [max]="maxDate" [matDatepicker]="picker2" formControlName="etd" autocomplete="off">
            <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
            <mat-datepicker #picker2></mat-datepicker>
          </mat-form-field>
        </mat-grid-tile>

      </mat-grid-list>
    </form>
      <p>
      <span class="title-info">Incortem:{{incoterm}}</span>
      </p>
    <mat-divider></mat-divider>
    <!-- Seleccion de producto-->
    <h1 style="font-weight: 700;font-family: 'Poppins', sans-serif; margin-top: 40px;">Product <mat-icon>inventory_2
      </mat-icon>
    </h1>

    <form [formGroup]="formProduct" (ngSubmit)="onSubmitProducto()">
      <mat-grid-list cols="3" rowHeight="100px">
        <mat-grid-tile [colspan]="1" [rowspan]="1">
          <mat-form-field class="ancho">
            <mat-label>Container Type</mat-label>
            <mat-select matNativeControl formControlName="typeContainer">
              <mat-option *ngIf="shipmentType == 'Terrestre'" value="20"> T1-20</mat-option>
              <mat-option *ngIf="shipmentType == 'Maritimo'" value="40HC">M1-40' HC(High Cube) 
              </mat-option>
              <mat-option *ngIf="shipmentType == 'Maritimo'" value="45HC">M2-45' HC(High Cube)
              </mat-option>
              <!-- <mat-option value="20"> T1-20</mat-option>
              <mat-option value="40">T2-40</mat-option>
              <mat-option value="40HC">M1-40' HC(High Cube)
              </mat-option>
              <mat-option value="45HC">M2-45' HC(High Cube)
              </mat-option> -->
            </mat-select>
          </mat-form-field>
        </mat-grid-tile>

        <mat-grid-tile [colspan]="1" [rowspan]="1">
          <mat-form-field class="ancho">
            <mat-label> Select Producto</mat-label>
            <!-- <mat-label>Select Product</mat-label> -->
            <mat-select matNativeControl name="select" required formControlName="sku"
              (ngModelChange)="selectedProduct = $event" (ngModel)="productsList">
              <mat-option *ngFor="let product of productsList" [value]="product">
                {{product.ItemDescription}}
                - ${{product.ListPrice}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </mat-grid-tile>  

        <mat-grid-tile [colspan]="1" [rowspan]="1">
          <mat-form-field class="ancho">
            <mat-label>Quantity in case </mat-label>
            <input matInput type="number" formControlName="quantity" autocomplete="off"
              (ngModelChange)="calculo($event)">
          </mat-form-field>
        </mat-grid-tile>
        
        <!-- Cantidad de pallets -->
        <!-- <mat-grid-tile [colspan]="1" [rowspan]="1">
            <mat-form-field class="ancho">
              <mat-label>Pallets</mat-label>
              <input id="pallets" matInput type="number" formControlName="pallets" autocomplete="off">
            </mat-form-field>
           </mat-grid-tile> -->
  
          <!-- Cantidad de contenedores -->
          <!-- <mat-grid-tile [colspan]="1" [rowspan]="1">
            <mat-form-field class="ancho">
              <mat-label># of Container</mat-label>
              <input matInput type="number" formControlName="quantityContainer" autocomplete="off">
            </mat-form-field>
          </mat-grid-tile> -->
          <button mat-raised-button type="submit" value="Agregar"
            >Add</button>
        </mat-grid-list>
      <p>
        <span class="title-info">Pallets: </span>
      </p>
      <p>
        <span class="title-info">NÂ° of Containers:</span>
      </p>
      <p>
        <span class="title-info" *ngFor="let shipmentType  of shipmentTypeList">Shipment Type:{{shipmentType.LookupCode}}</span>
      </p>
      <!-- <button mat-raised-button type="submit" value="Agregar"
          >Add</button> -->
      <!-- [disabled]="!formProduct.valid || !confirmaCantidad" -->
      <mat-divider></mat-divider>

      <br>
    </form>
    <app-table></app-table>
    <button class="button2" mat-raised-button (click)="completarOrden()" routerLink="/inicio/seguimiento"
      value="Confirmar">Confirm
    </button>

  </div>
